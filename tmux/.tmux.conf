# reload config file
bind r source-file ~/.tmux.conf \; display ".tmux.conf reloaded!"

# Set default shell
set-option -g default-shell /usr/bin/fish

# Set terminal color
set -g default-terminal "screen-256color"

# make delay shorter
set -sg escape-time 0

# Enable mouse mode
set -g mouse on

# Set mode keys to vi
set-window-option -g mode-keys vi

## Binds xsel to all copy binds to also copy to system clipboard
# vi mode
bind -T copy-mode-vi Enter             send-keys -X copy-pipe-and-cancel "xsel --clipboard --input"
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel "xsel --clipboard --input"
bind -T copy-mode-vi C-j               send-keys -X copy-selection-and-cancel "xsel --clipboard --input"
bind -T copy-mode-vi D                 send-keys -X copy-end-of-line "xsel --clipboard --input"
# emacs mode
bind -T copy-mode C-k               send-keys -X copy-end-of-line "xsel --clipboard --input"
bind -T copy-mode C-w               send-keys -X copy-selection-and-cancel "xsel --clipboard --input"
bind -T copy-mode MouseDragEnd1Pane send-keys -X copy-selection-and-cancel "xsel --clipboard --input"
bind -T copy-mode M-w               send-keys -X copy-selection-and-cancel "xsel --clipboard --input"
### Bind copy without canceling keys
# vi mode
bind -T copy-mode-vi y              send-keys -X copy-pipe "xsel --clipboard --input" \; send -X clear-selection \; display "line yanked"

# synchronize all panes in a window
bind y setw synchronize-panes \; display "switched synchronized-panes"

# Bind new and split window commands so the pane starts in the current pane directory
bind -T prefix c new-window -c "#{pane_current_path}"
bind -T prefix '"' split-window -c "#{pane_current_path}"
bind -T prefix % split-window -h -c "#{pane_current_path}"


# Powerline
run-shell "powerline-daemon -q || true"
source "$HOME/.local/lib/python2.7/site-packages/powerline/bindings/tmux/powerline.conf"
